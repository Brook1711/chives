<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>弹幕测试</title>
    <link href="../static/css/scojs.css" rel="stylesheet">
    <link href="../static/css/colpick.css" rel="stylesheet">
    <link href="../static/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="../static/css/main.css">
</head>
<body>
<input type="file" accept="video/*" />
<div id="danmup" style="left: 50%;margin-left:-400px;top:100px">
</div>
<div style="display: none">
    <span class="glyphicon" aria-hidden="true">&#xe072</span>
    <span class="glyphicon" aria-hidden="true">&#xe073</span>
    <span class="glyphicon" aria-hidden="true">&#xe242</span>
    <span class="glyphicon" aria-hidden="true">&#xe115</span>
    <span class="glyphicon" aria-hidden="true">&#xe111</span>
    <span class="glyphicon" aria-hidden="true">&#xe096</span>
    <span class="glyphicon" aria-hidden="true">&#xe097</span>
</div>


</body>

<script src="../static/js/jquery-2.1.4.min.js"></script>
<script src="../static/js/jquery.shCircleLoader.js"></script>
<script src="../static/js/sco.tooltip.js"></script>
<script src="../static/js/colpick.js"></script>
<script src="../static/js/jquery.danmu.js"></script>
<script src="../static/js/main.js"></script>
<!--<script src="../dist/js/danmuplayer.min.js"></script>-->
<script>
    (function localFileVideoPlayer() {
        'use strict'
        var URL = window.URL || window.webkitURL
        var displayMessage = function (message, isError) {
            var element = document.querySelector('#danmup')
            element.innerHTML = message
            element.className = isError ? 'error' : 'info'
        }
        var playSelectedFile = function (event) {
            var file = this.files[0]
            var type = file.type
            var videoNode = document.querySelector('#danmup')
            //var canPlay = videoNode.canPlayType(type)
            //if (canPlay === '') canPlay = 'no'
            //var message = 'Can play type "' + type + '": ' + canPlay
            //var isError = canPlay === 'no'
            //displayMessage(message, isError)

            //if (isError) {
            //    return
            //}

            var fileURL = URL.createObjectURL(file)
            videoNode.src = fileURL
            $("#danmup").DanmuPlayer({
                src:fileURL,
                height: "480px", //区域的高度
                width: "800px" //区域的宽度
                ,autostart:""
                ,controls:""
                //,urlToGetDanmu:"query.php"
                //,urlToPostDanmu:"stone.php"
            });
            $("#danmup .danmu-div").danmu("addDanmu",[
                { "text":"这是滚动弹幕" ,color:"white",size:1,position:0,time:2}
                ,{ "text":"我是帽子绿" ,color:"green",size:1,position:0,time:3}
                ,{ "text":"哈哈哈啊哈" ,color:"black",size:1,position:0,time:10}
                ,{ "text":"这是顶部弹幕" ,color:"yellow" ,size:1,position:1,time:3}
                ,{ "text":"这是底部弹幕" , color:"red" ,size:1,position:2,time:9}
                ,{ "text":"大家好，我是伊藤橙" ,color:"orange",size:1,position:1,time:3}

            ])
        }
        var inputNode = document.querySelector('input')
        inputNode.addEventListener('change', playSelectedFile, false)
    })()

</script>

</html>